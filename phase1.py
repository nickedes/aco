# Phase 1:
# Initial S box generation using Chaotic Logistic Map
# and Tent Map
# Chaotic Logistic Map: x[i+1] = ux[i](1-x[i])
# Tent Map: x[i+1] = x[i]/b,           0 < x[i] <=b
#                    (1-x[i])/(1-b),   b < x[i] < 1
# x0 = 15961/29589
# u  = 3.99999999999999999999
# b  = 0.49999999999999999999


from decimal import *
from random import randint
from math import floor
from functions import *

# Set precision to 20
getcontext().prec = 20

# Define intital/constant values
x = Decimal(15961)/Decimal(29589)
u  = Decimal(39999999999999999999)/Decimal(10000000000000000000)
b = Decimal(4999999999999999999)/Decimal(10000000000000000000)

print x
print u
print b

# Iterate over Chaotic Logistic Map
x = chaotic(x, u, 50)
print x

# Iterate over Tent Map
x = tent(x, b, 50)
print x

s = []
while len(s) < 256:
    x = chaotic(x, u, 13)
    x = tent(x, b, 7)
    #n = randint(0,255)
    n = int(floor(256*x))
    if n not in s:
        print len(s)
        print s
        s.append(n)

#s = [255, 82, 27, 253, 78, 48, 10, 12, 28, 4, 65, 166, 2, 31, 0, 68, 20, 222, 138, 130, 53, 26, 114, 58, 47, 8, 70, 137, 40, 165, 117, 57, 177, 44, 1, 71, 81, 154, 89, 80, 46, 150, 67, 35, 118, 109, 85, 30, 63, 11, 97, 49, 21, 107, 66, 51, 99, 17, 86, 69, 155, 15, 9, 19, 98, 16, 37, 93, 103, 22, 76, 41, 55, 5, 29, 34, 39, 232, 122, 88, 6, 14, 94, 184, 7, 127, 50, 64, 33, 200, 59, 24, 102, 84, 100, 209, 18, 110, 148, 235, 173, 60, 139, 42, 156, 79, 142, 190, 23, 131, 167, 207, 146, 3, 208, 152, 77, 104, 175, 87, 158, 61, 135, 106, 75, 214, 13, 74, 188, 202, 43, 62, 128, 54, 140, 129, 25, 32, 96, 196, 176, 174, 161, 45, 144, 112, 119, 121, 116, 101, 38, 134, 108, 160, 189, 151, 111, 95, 124, 201, 91, 187, 83, 113, 242, 123, 52, 120, 136, 193, 212, 126, 36, 56, 72, 115, 141, 92, 164, 163, 73, 147, 170, 90, 210, 143, 157, 133, 198, 125, 105, 227, 206, 237, 145, 197, 132, 182, 153, 169, 168, 221, 204, 172, 183, 241, 192, 149, 186, 194, 159, 171, 230, 224, 181, 213, 203, 178, 195, 205, 233, 236, 218, 239, 216, 185, 240, 225, 219, 215, 179, 199, 191, 162, 180, 249, 245, 223, 220, 229, 231, 247, 228, 226, 217, 238, 234, 250, 243, 211, 248, 246, 244, 252, 251, 254]

print pretty(s)
